
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 730 – Adding iOS as a supported platform | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0730/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta name="description" content="Python Enhancement Proposals (PEPs)">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 730</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 730 – Adding iOS as a supported platform</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Russell Keith-Magee &lt;russell&#32;&#97;t&#32;keith-magee.com&gt;</dd>
<dt class="field-even">Sponsor<span class="colon">:</span></dt>
<dd class="field-even">Ned Deily &lt;nad&#32;&#97;t&#32;python.org&gt;</dd>
<dt class="field-odd">Discussions-To<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/pep730-adding-ios-as-a-supported-platform/35854">Discourse thread</a></dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Proposal under active discussion and revision">Draft</abbr></dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even">09-Oct-2023</dd>
<dt class="field-odd">Python-Version<span class="colon">:</span></dt>
<dd class="field-odd">3.13</dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#development-landscape">Development landscape</a></li>
<li><a class="reference internal" href="#posix-compliance">POSIX compliance</a></li>
<li><a class="reference internal" href="#dynamic-libraries">Dynamic libraries</a></li>
<li><a class="reference internal" href="#distribution">Distribution</a></li>
<li><a class="reference internal" href="#console-and-interactive-usage">Console and interactive usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#platform-identification">Platform identification</a><ul>
<li><a class="reference internal" href="#sys"><code class="docutils literal notranslate"><span class="pre">sys</span></code></a></li>
<li><a class="reference internal" href="#platform"><code class="docutils literal notranslate"><span class="pre">platform</span></code></a></li>
<li><a class="reference internal" href="#os"><code class="docutils literal notranslate"><span class="pre">os</span></code></a></li>
<li><a class="reference internal" href="#sysconfig"><code class="docutils literal notranslate"><span class="pre">sysconfig</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#subprocess-support">Subprocess support</a></li>
<li><a class="reference internal" href="#dynamic-module-loading">Dynamic module loading</a></li>
<li><a class="reference internal" href="#ci-resources">CI resources</a></li>
<li><a class="reference internal" href="#packaging">Packaging</a></li>
<li><a class="reference internal" href="#pep-11-update">PEP 11 Update</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#sys-implementation-simulator-availability"><code class="docutils literal notranslate"><span class="pre">sys.implementation._simulator</span></code> availability</a></li>
</ul>
</li>
<li><a class="reference internal" href="#open-issues">Open Issues</a><ul>
<li><a class="reference internal" href="#on-device-testing">On-device testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>This PEP proposes adding iOS as a supported platform in CPython. The initial
goal is to achieve Tier 3 support for Python 3.13. This PEP describes the
technical aspects of the changes that are required to support iOS. It also
describes the project management concerns related to adoption of iOS as a Tier 3
platform.</p>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#motivation" role="doc-backlink">Motivation</a></h2>
<p>Over the last 15 years, mobile platforms have become increasingly important
parts of the computing landscape. iOS is one of two operating systems that
control the vast majority of these devices. However, there is no official
support for iOS in CPython.</p>
<p>The <a class="reference external" href="https://beeware.org">BeeWare Project</a> and <a class="reference external" href="https://kivy.org">Kivy</a>
have both supported iOS for almost 10 years. This support has been able to
generate applications that have been accepted for publication in the iOS App
Store. This demonstrates the technical feasibility of iOS support.</p>
<p>It is important for the future of Python as a language that it is able to be
used on any hardware or OS that has widespread adoption. If Python cannot be
used a on a platform that has widespread use, adoption of the language will be
impacted as potential users will adopt other languages that <em>do</em> provide support
for these platforms.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<section id="development-landscape">
<h3><a class="toc-backref" href="#development-landscape" role="doc-backlink">Development landscape</a></h3>
<p>iOS provides a single API, but 2 distinct ABIs - <code class="docutils literal notranslate"><span class="pre">iphoneos</span></code> (physical
devices), and <code class="docutils literal notranslate"><span class="pre">iphonesimulator</span></code>. Each of these ABIs can be provided on
multiple CPU architectures. At time of writing, Apple officially supports
<code class="docutils literal notranslate"><span class="pre">arm64</span></code> on the device ABI, and <code class="docutils literal notranslate"><span class="pre">arm64</span></code> and <code class="docutils literal notranslate"><span class="pre">x86_64</span></code> are supported on the
simulator ABI.</p>
<p>As with macOS, iOS supports the creation of “fat” binaries that contains
multiple CPU architectures. However, fat binaries <em>cannot</em> span ABIs. That is,
it is possible to have a fat <em>simulator</em> binary, and a fat <em>device</em> binary, but
it is not possible to create a single fat “iOS” binary that covers both
simulator and device needs. To support distribution of a single development
artefact, Apple uses an “XCframework” structure - a wrapper around multiple ABIs
that implement a common API.</p>
<p>iOS runs on a Darwin kernel, similar to macOS. However, there is a need to
differentiate between macOS and iOS at an implementation level, as there are
significant platform differences between iOS and macOS.</p>
<p>iOS code is compiled for compatibility against a minimum iOS version.</p>
</section>
<section id="posix-compliance">
<h3><a class="toc-backref" href="#posix-compliance" role="doc-backlink">POSIX compliance</a></h3>
<p>iOS is broadly a POSIX platform. However, similar to WASI/Emscripten, there are
POSIX APIs that exist on iOS, but cannot be used; and POSIX APIs that don’t
exist at all.</p>
<p>Most notable of these is the fact that iOS does not provide any form of
multiprocess support. <code class="docutils literal notranslate"><span class="pre">fork</span></code> and <code class="docutils literal notranslate"><span class="pre">spawn</span></code> both <em>exist</em> in the iOS API;
however, if they are invoked, the invoking iOS process stops, and the new
process doesn’t start.</p>
<p>Unlike WASI/Emscripten, threading <em>is</em> supported on iOS.</p>
<p>There are also significant limits to socket handling. Due to process sandboxing,
there is no availability of interprocess communication via socket. However,
sockets for network communication <em>are</em> available.</p>
</section>
<section id="dynamic-libraries">
<h3><a class="toc-backref" href="#dynamic-libraries" role="doc-backlink">Dynamic libraries</a></h3>
<p>The iOS <a class="reference external" href="https://developer.apple.com/app-store/review/guidelines">App Store guidelines</a> allow apps to be
written in languages other than Objective C or Swift. However, they have very
strict guidelines about the structure of apps that are submitted for
distribution.</p>
<p>iOS apps can use dynamically loaded libraries; however, there are very strict
requirements on how dynamically loaded content is packaged for use on iOS:</p>
<ul class="simple">
<li>Dynamic binary content must be compiled as dynamic libraries, not shared
objects or binary bundles.</li>
<li>They must be packaged in the app bundle as Frameworks.</li>
<li>Each Framework can only contain a single dynamic library.</li>
<li>The Framework <em>must</em> be contained in the iOS App’s <code class="docutils literal notranslate"><span class="pre">Frameworks</span></code> folder.</li>
<li>A Framework may not contain any non-library content.</li>
</ul>
<p>This imposes some constraints on the operation of CPython. It is not possible
store binary modules in the <code class="docutils literal notranslate"><span class="pre">lib-dynload</span></code> and/or <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> folders;
they must be stored in the app’s Frameworks folder, with each module wrapped in
a Framework. This also means that the common assumption that a Python module can
construct the location of a binary module by using the <code class="docutils literal notranslate"><span class="pre">__file__</span></code> attribute of
the Python module no longer holds.</p>
<p>As with macOS, compiling a dynamic library requires the use of the <code class="docutils literal notranslate"><span class="pre">--undefined</span>
<span class="pre">dynamic_lookup</span></code> option to avoid linking libPython into every binary module.
This option currently raises a deprecation warning when it is used. This warning
<em>was</em> previously raised on macOS builds as well; however, responses from Apple
staff suggests this was unintentional, and they <a class="reference external" href="https://developer.apple.com/forums/thread/719961">did not intend to break the
CPython ecosystem by removing this option</a>. It is difficult to judge
whether iOS support would fall under the same umbrella.</p>
</section>
<section id="distribution">
<h3><a class="toc-backref" href="#distribution" role="doc-backlink">Distribution</a></h3>
<p>Adding iOS as a Tier 3 platform only requires adding support for compiling an
iOS-compatibile code with an unpatched CPython code checkout. It does not
require production of officially distributed iOS artefacts for use by end-users.</p>
<p>If/when iOS is updated to Tier 2 or 1 support, there should be a process for
producing iOS distribution artefacts. This could be in the form of an “embedded
distribution” analogous to the Windows embedded distribution, or as a Cocoapod
or Swift Package that could be added to an Xcode project.</p>
</section>
<section id="console-and-interactive-usage">
<h3><a class="toc-backref" href="#console-and-interactive-usage" role="doc-backlink">Console and interactive usage</a></h3>
<p>Distribution of a traditional CPython REPL or interactive “python.exe” should
not be considered a goal of this work.</p>
<p>Mobile devices (including iOS) do not provide a TTY-style console. They do not
provide <code class="docutils literal notranslate"><span class="pre">stdin</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout</span></code> or <code class="docutils literal notranslate"><span class="pre">stderr</span></code>. iOS provides a system log, and it
is possible to install a redirection so that all <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code>
content is redirected to the system log; but there is no analog for
<code class="docutils literal notranslate"><span class="pre">stdin</span></code>.</p>
<p>In addition, iOS places restrictions on downloading additional code at runtime
(as this behavior would be functionally indistinguishable from trying to work
around App Store review). As a result, a traditional “create a virtual
environment and pip install” development experience will not be viable on iOS.</p>
<p>It is <em>possible</em> to build an native iOS application that provides a REPL
interface. This would be closer to an IDLE-style user experience; however,
Tkinter cannot be used on iOS, so any app would require a ground-up rewrite. The
iOS app store already contains several examples of apps in this category (e.g.,
<a class="reference external" href="http://www.omz-software.com/pythonista/">Pythonista</a> and <a class="reference external" href="https://pyto.readthedocs.io/">Pyto</a>). The focus of this work would be to provide
an embedded distribution that IDE-style native interfaces could utilize, not a
user-facing “app” interface to iOS on Python.</p>
</section>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<section id="platform-identification">
<h3><a class="toc-backref" href="#platform-identification" role="doc-backlink">Platform identification</a></h3>
<section id="sys">
<h4><a class="toc-backref" href="#sys" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">sys</span></code></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">sys.platform</span></code> will identify as <code class="docutils literal notranslate"><span class="pre">&quot;ios&quot;</span></code> on both simulator and physical
devices.</p>
<p><code class="docutils literal notranslate"><span class="pre">sys.implementation._multiarch</span></code> will describe the ABI and CPU architecture:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;iphoneos-arm64&quot;</span></code> for ARM64 devices</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;iphonesimulator-arm64&quot;</span></code> for ARM64 simulators</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;iphonesimulator-x86_64&quot;</span></code> for x86_64 simulators</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">sys.implementation</span></code> will also have an additional attribute - <code class="docutils literal notranslate"><span class="pre">_simulator</span></code> -
storing a Boolean that is <code class="docutils literal notranslate"><span class="pre">True</span></code> if the device running the app is a simulator.
This attribute would not exist on non-iOS platforms.</p>
</section>
<section id="platform">
<h4><a class="toc-backref" href="#platform" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">platform</span></code></a></h4>
<p>Platform will be used as the primary mechanism for retrieving OS and device
details.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">platform.system()</span></code> - <code class="docutils literal notranslate"><span class="pre">&quot;iOS&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">platform.node()</span></code> - the user-provided name of the device, as returned by the
<code class="docutils literal notranslate"><span class="pre">[[UIDevice</span> <span class="pre">currentDevice]</span> <span class="pre">systemName]</span></code> system call (e.g.,
<code class="docutils literal notranslate"><span class="pre">&quot;Janes-iPhone&quot;</span></code>). For simulated devices, this will be the name of the
development computer running the simulator.</li>
<li><code class="docutils literal notranslate"><span class="pre">platform.release()</span></code> - the iOS version number, as a string (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;16.6.1&quot;</span></code>)</li>
<li><code class="docutils literal notranslate"><span class="pre">platform.machine()</span></code> - The device model returned by <code class="docutils literal notranslate"><span class="pre">[[UIDevice</span>
<span class="pre">currentDevice]</span> <span class="pre">model]</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;iPhone13,2&quot;</span></code>); or <code class="docutils literal notranslate"><span class="pre">&quot;iPhoneSimulator&quot;</span></code> for
simulated devices.</li>
</ul>
<p>All other values will be as returned by <code class="docutils literal notranslate"><span class="pre">os.uname()</span></code></p>
</section>
<section id="os">
<h4><a class="toc-backref" href="#os" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">os</span></code></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">os.uname()</span></code> will return the raw result of a POSIX <code class="docutils literal notranslate"><span class="pre">uname()</span></code> call. This will
result in the following values:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">sysname</span></code> - <code class="docutils literal notranslate"><span class="pre">&quot;Darwin&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">release</span></code> - The Darwin kernel version (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;22.6.0&quot;</span></code>)</li>
</ul>
</section>
<section id="sysconfig">
<h4><a class="toc-backref" href="#sysconfig" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">sysconfig</span></code></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">sysconfig</span></code> module will use the minimum iOS version as part of
<code class="docutils literal notranslate"><span class="pre">sysconfig.get_platform()</span></code> identifier (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;iOS-12.0-iphoneos-arm64&quot;</span></code>).
The <code class="docutils literal notranslate"><span class="pre">sysconfigdata_name</span></code> and Config makefile will follow the same patterns as
existing platforms (using <code class="docutils literal notranslate"><span class="pre">sys.platform</span></code>, <code class="docutils literal notranslate"><span class="pre">sys.implementation._multiarch</span></code>
etc.) to construct identifiers.</p>
</section>
</section>
<section id="subprocess-support">
<h3><a class="toc-backref" href="#subprocess-support" role="doc-backlink">Subprocess support</a></h3>
<p>iOS will leverage the pattern for disabling subprocesses established by
WASI/Emscripten. The <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> module will raise an exception if an attempt
is made to start a subprocess, and <code class="docutils literal notranslate"><span class="pre">os.fork</span></code> and <code class="docutils literal notranslate"><span class="pre">os.spawn</span></code> calls will raise
an <code class="docutils literal notranslate"><span class="pre">OSError</span></code>.</p>
</section>
<section id="dynamic-module-loading">
<h3><a class="toc-backref" href="#dynamic-module-loading" role="doc-backlink">Dynamic module loading</a></h3>
<p>To accommodate iOS dynamic loading, the <code class="docutils literal notranslate"><span class="pre">importlib</span></code> bootstrap will be extended
to add a metapath finder that can convert a request for a Python binary module
into a Framework location. This finder will only be installed if <code class="docutils literal notranslate"><span class="pre">sys.platform</span>
<span class="pre">==</span> <span class="pre">&quot;ios&quot;</span></code>.</p>
<p>This finder will convert a Python module name (e.g., <code class="docutils literal notranslate"><span class="pre">foo.bar._whiz</span></code>) into a
unique Framework name by replacing the dots with underscores (i.e.,
<code class="docutils literal notranslate"><span class="pre">foo_bar__whiz.framework</span></code>). A framework is a directory; the finder will look
for <code class="docutils literal notranslate"><span class="pre">_whiz.dylib</span></code> in that directory.</p>
</section>
<section id="ci-resources">
<h3><a class="toc-backref" href="#ci-resources" role="doc-backlink">CI resources</a></h3>
<p>GitHub Actions is able to host iOS simulators on their macOS machines, and the
iOS simulator can be controlled by scripting environments. The free tier
currently only provides x86_64 macOS machines; however ARM64 runners <a class="reference external" href="https://github.blog/2023-10-02-introducing-the-new-apple-silicon-powered-m1-macos-larger-runner-for-github-actions/">have
recently become available on paid plans</a>.</p>
<p>If GitHub Actions resources are insufficient or not viable for cost reasons,
Anaconda has offered to provide resources to support CI requirements.</p>
</section>
<section id="packaging">
<h3><a class="toc-backref" href="#packaging" role="doc-backlink">Packaging</a></h3>
<p>iOS will not provide a “universal” wheel format. Instead, wheels will be
provided for each ABI-arch combination. At present, no binary merging is
required. There is only one on-device architecture; and simulator binaries are
not considered to be distributable artefacts, so only one architecture is needed
to build a simulator.</p>
<p>iOS wheels will use tags:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">iOS_12_0_iphoneos_arm64</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">iOS_12_0_iphonesimulator_arm64</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">iOS_12_0_iphonesimulator_x86_64</span></code></li>
</ul>
<p>In these tags, “12.0” is the minimum supported iOS version. The choice of
minimum supported iOS version is a decision of whoever compiles CPython for iOS.
At time of writing, iOS 12.0 exposes most significant iOS features, while
reaching near 100% of devices.</p>
<p>These wheels can include binary modules in-situ (i.e., co-located with the
Python source, in the same way as wheels for a desktop platform); however, they
will need to be post-processed as binary modules need to be moved into the
“Frameworks” location for distribution. This can be automated with an Xcode
build step.</p>
</section>
<section id="pep-11-update">
<h3><a class="toc-backref" href="#pep-11-update" role="doc-backlink">PEP 11 Update</a></h3>
<p><a class="pep reference internal" href="../pep-0011/" title="PEP 11 – CPython platform support">PEP 11</a> will be updated to include the three iOS ABIs:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">aarch64-apple-ios</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">aarch64-apple-ios-simulator</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">x86_64-apple-ios-simulator</span></code></li>
</ul>
<p>Ned Deily will serve as the initial core team contact for these ABIs.</p>
</section>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#backwards-compatibility" role="doc-backlink">Backwards Compatibility</a></h2>
<p>Adding a new platform does not introduce any backwards compatibility concerns to
CPython itself.</p>
<p>There may be some backwards compatibility implications on the projects that have
historically provided CPython support (i.e., BeeWare and Kivy) if the final form
of any CPython patches don’t align with the patches they have historically used.</p>
<p>Although not strictly a backwards compatibility issue, there <em>is</em> a platform
adoption consideration. Although CPython itself may support iOS, if it is
unclear how to produce iOS-compatible wheels, and prominent libraries like
cryptography, Pillow, and NumPy don’t provide iOS wheels, the ability of the
community to adopt Python on iOS will be limited. Therefore, it will be
necessary to clearly document how projects can add iOS builds to their CI and
release tooling. Adding iOS support to tools like <a class="reference external" href="https://crossenv.readthedocs.io/">crossenv</a> and <a class="reference external" href="https://cibuildwheel.readthedocs.io/">cibuildwheel</a> may be one way to achieve this.</p>
</section>
<section id="security-implications">
<h2><a class="toc-backref" href="#security-implications" role="doc-backlink">Security Implications</a></h2>
<p>Adding iOS as a new platform does not add any security implications.</p>
</section>
<section id="how-to-teach-this">
<h2><a class="toc-backref" href="#how-to-teach-this" role="doc-backlink">How to Teach This</a></h2>
<p>The education needs related to this PEP mostly relate to how end-users can add
iOS support to their own Xcode projects. This can be accomplished with
documentation and tutorials on that process. The need for this documentation
will increase if/when support raises from Tier 3 to Tier 2 or 1; however, this
transition should also be accompanied with simplified deployment artefacts (such
as a Cocoapod or Swift package) that are integrated with Xcode development.</p>
</section>
<section id="reference-implementation">
<h2><a class="toc-backref" href="#reference-implementation" role="doc-backlink">Reference Implementation</a></h2>
<p>The BeeWare <a class="reference external" href="https://github.com/beeware/Python-Apple-support">Python-Apple-support</a> repository contains a
reference patch and build tooling to compile a distributable artefact.</p>
<p><a class="reference external" href="https://briefcase.readthedocs.org">Briefcase</a> provides a reference
implementation of code to execute test suites on iOS simulators. The <a class="reference external" href="https://github.com/beeware/toga/tree/main/testbed">Toga
Testbed</a> is an example of
a test suite that is executed on the iOS simulator using GitHub Actions.</p>
</section>
<section id="rejected-ideas">
<h2><a class="toc-backref" href="#rejected-ideas" role="doc-backlink">Rejected Ideas</a></h2>
<section id="sys-implementation-simulator-availability">
<h3><a class="toc-backref" href="#sys-implementation-simulator-availability" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">sys.implementation._simulator</span></code> availability</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">_simulator</span></code> attribute could be provided on <em>all</em> platforms, returning
<code class="docutils literal notranslate"><span class="pre">False</span></code>. However, the attribute has no use outside of an iOS context.</p>
</section>
</section>
<section id="open-issues">
<h2><a class="toc-backref" href="#open-issues" role="doc-backlink">Open Issues</a></h2>
<section id="on-device-testing">
<h3><a class="toc-backref" href="#on-device-testing" role="doc-backlink">On-device testing</a></h3>
<p>CI testing on simulators can be accommodated reasonably easily.
On-device testing is much harder, as availability of device farms that could be
configured to provide Buildbots or Github Actions runners is limited.</p>
<p>However, on device testing may not be necessary. As a data point - Apple’s Xcode
Cloud solution doesn’t provide on-device testing. They rely on the fact that the
API is consistent between device and simulator, and ARM64 simulator testing is
sufficient to reveal CPU-specific issues.</p>
</section>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the CC0-1.0-Universal
license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0730.rst">https://github.com/python/peps/blob/main/peps/pep-0730.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/pep-0730.rst">2023-10-11 08:57:44 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#development-landscape">Development landscape</a></li>
<li><a class="reference internal" href="#posix-compliance">POSIX compliance</a></li>
<li><a class="reference internal" href="#dynamic-libraries">Dynamic libraries</a></li>
<li><a class="reference internal" href="#distribution">Distribution</a></li>
<li><a class="reference internal" href="#console-and-interactive-usage">Console and interactive usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#platform-identification">Platform identification</a><ul>
<li><a class="reference internal" href="#sys"><code class="docutils literal notranslate"><span class="pre">sys</span></code></a></li>
<li><a class="reference internal" href="#platform"><code class="docutils literal notranslate"><span class="pre">platform</span></code></a></li>
<li><a class="reference internal" href="#os"><code class="docutils literal notranslate"><span class="pre">os</span></code></a></li>
<li><a class="reference internal" href="#sysconfig"><code class="docutils literal notranslate"><span class="pre">sysconfig</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#subprocess-support">Subprocess support</a></li>
<li><a class="reference internal" href="#dynamic-module-loading">Dynamic module loading</a></li>
<li><a class="reference internal" href="#ci-resources">CI resources</a></li>
<li><a class="reference internal" href="#packaging">Packaging</a></li>
<li><a class="reference internal" href="#pep-11-update">PEP 11 Update</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#sys-implementation-simulator-availability"><code class="docutils literal notranslate"><span class="pre">sys.implementation._simulator</span></code> availability</a></li>
</ul>
</li>
<li><a class="reference internal" href="#open-issues">Open Issues</a><ul>
<li><a class="reference internal" href="#on-device-testing">On-device testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0730.rst">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
</body>
</html>